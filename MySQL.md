# MySQL

## 操作数据库CRUD

#### C (create) 创建

1. 创建数据库

    create database 数据库名称;

2. 创建数据库判断是否存在，如果不存在则创建数据库

    create database if not exists 数据库名称

3. 创建数据库并指定字符集

    create database 数据库名称 character set 字符集(utf8, gbk等)

4. 联系创建db4数据库，判读是否存在，并指定字符集为gbk

    create database if not exists db4 character set gbk;

#### R (Retrieve) 查询

1. 查询所有数据库的名称

    show databases;

2. 查询某个数据库的字符集；查询某个数据库的创建语句

    show create database 数据库名称;	

#### U (Update) 修改

1. 修改数据库的字符集

    alter database 数据库名称  character set 字符集;

#### D (delete) 删除

1. 删除数据库

    drop database  数据库名;

2. 判断数据库存在，存在再删除

    drop database if exists 数据库名;

#### 使用数据库

1. 查询正在使用的数据库名

    select database();

2. 使用数据库

    use 数据库名称;

## MySQL数据类型

### 数值类型

|     类型     |                   大小                   |                         范围(有符号)                         |                         范围(无符号)                         | 用途            |
| :----------: | :--------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | --------------- |
|   TINYINT    |                  1 byte                  |                         (-128，127)                          |                           (0，255)                           | 小整数值        |
|   SMALLINT   |                 2 bytes                  |                      (-32 768，32 767)                       |                         (0，65 535)                          | 大整数值        |
|  MEDIUMINT   |                 3 bytes                  |                   (-8 388 608，8 388 607)                    |                       (0，16 777 215)                        | 大整数值        |
| INT或INTEGER |                 4 bytes                  |               (-2 147 483 648，2 147 483 647)                |                      (0，4 294 967 295)                      | 大整数值        |
|    BIGINT    |                 8 bytes                  |   (-9,223,372,036,854,775,808，9 223 372 036 854 775 807)    |               (0，18 446 744 073 709 551 615)                | 极大整数值      |
|    FLOAT     |                 4 bytes                  | (-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38) |         0，(1.175 494 351 E-38，3.402 823 466 E+38)          | 单精度 浮点数值 |
|    DOUBLE    |                 8 bytes                  | (-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308) | 0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308) | 双精度 浮点数值 |
|   DECIMAL    | 对DECIMAL(M,D) ，如果M>D，为M+2否则为D+2 |                        依赖于M和D的值                        |                        依赖于M和D的值                        | 小数值          |

### 时间和日期类型

|   类型    | 大小 ( bytes) |                             范围                             |        格式         |           用途           |
| :-------: | :-----------: | :----------------------------------------------------------: | :-----------------: | :----------------------: |
|   DATE    |       3       |                    1000-01-01/9999-12-31                     |     YYYY-MM-DD      |          日期值          |
|   TIME    |       3       |                   '-838:59:59'/'838:59:59'                   |      HH:MM:SS       |     时间值或持续时间     |
|   YEAR    |       1       |                          1901/2155                           |        YYYY         |          年份值          |
| DATETIME  |       8       |           1000-01-01 00:00:00/9999-12-31 23:59:59            | YYYY-MM-DD HH:MM:SS |     混合日期和时间值     |
| TIMESTAMP |       4       | 1970-01-01 00:00:00/2038结束时间是第 **2147483647** 秒，北京时间 **2038-1-19 11:14:07**，格林尼治时间 2038年1月19日 凌晨 03:14:07 |   YYYYMMDD HHMMSS   | 混合日期和时间值，时间戳 |

### 字符串类型

| 类型       | 大小                  | 用途                            |
| :--------- | :-------------------- | :------------------------------ |
| CHAR       | 0-255 bytes           | 定长字符串                      |
| VARCHAR    | 0-65535 bytes         | 变长字符串                      |
| TINYBLOB   | 0-255 bytes           | 不超过 255 个字符的二进制字符串 |
| TINYTEXT   | 0-255 bytes           | 短文本字符串                    |
| BLOB       | 0-65 535 bytes        | 二进制形式的长文本数据          |
| TEXT       | 0-65 535 bytes        | 长文本数据                      |
| MEDIUMBLOB | 0-16 777 215 bytes    | 二进制形式的中等长度文本数据    |
| MEDIUMTEXT | 0-16 777 215 bytes    | 中等长度文本数据                |
| LONGBLOB   | 0-4 294 967 295 bytes | 二进制形式的极大文本数据        |
| LONGTEXT   | 0-4 294 967 295 bytes | 极大文本数据                    |

## \_DDL\_ 操作表

查询某个数据库中所有表的名称

​	show tables;

查询表结构

​	desc 表名;

#### C (create) 创建

1. 语法

    ```mysql
    create table 表名 (
    	列名1 数据类型1,
        列名2 数据类型2,
        列名3 数据类型3,
        ....
        列名n 数据类型n
    );
    ```

    1. 数据类型

        1. int 整数类型

            age int,

        2. double 小数类型

            score double(m, n) m是总个数 n是小数位

        3. date 日期，只包含年月日 yyyy-MM-dd

        4. datetime 日期 包含年月日时分秒 yyyy-mm-dd HH:mm:ss

        5. timestamp 时间戳类型 包含年月日时分秒 yyyy-mm-dd hh:mm:ss

            *如果将来不给这个字段赋值或赋值为null 则默认使用当前的系统时间，来自动赋值

        6. varchar 字符串

            name varchar(20) 姓名最大20个字符

#### D (delete) 删除

1. 直接删除

    drop table  表名;

2. 判断是否存在，然后再删除

    drop table if exists 表名;

#### U (Update) 修改

 1. 修改表名

    alter table 表名 rename to 新的表名;

	2. 修改表的字符集

    alter table 表名 character set 字符集名称;

	3. 添加一列

    alter table 表名 add 列名 数据类型;	

	4. 修改列名称 类型

    alter table 表名 change 列名 新列名 新数据类型;

    alter table 表名 modify 列名 新数据类型;

	5. 删除列

    alter table 表名 drop 列名;

